<div class="card bg-white h-100 shadow-sm">
  <div
    class="card-header bg-white border-bottom d-flex justify-content-between align-items-center"
  >
    <h5 class="mb-0 text-dark fw-bold">
      <i class="bi bi-megaphone-fill me-2 text-warning"></i>Announcements
    </h5>
    <button class="btn btn-sm btn-warning" (click)="toggleForm()">
      <i class="bi" [ngClass]="{ 'bi-x-lg': showForm, 'bi-plus-lg': !showForm }"></i>
      {{ showForm ? 'Close' : 'Add New' }}
    </button>
  </div>

  <div class="card-body">
    <!-- Add Announcement Form -->
    <div *ngIf="showForm" class="mb-4 border rounded p-3 bg-light shadow-sm">
      <form (ngSubmit)="addAnnouncement()" #f="ngForm">
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label small fw-semibold text-secondary">Title</label>
            <input
              type="text"
              class="form-control form-control-sm"
              placeholder="Enter announcement title"
              [(ngModel)]="form.title"
              name="title"
              required
            />
          </div>

          <div class="col-md-6">
            <label class="form-label small fw-semibold text-secondary">Category</label>
            <select
              class="form-select form-select-sm"
              [(ngModel)]="form.category"
              name="category"
              required
            >
              <option value="">Select Category</option>
              <option>General</option>
              <option>Exam</option>
              <option>Holiday</option>
              <option>Event</option>
            </select>
          </div>

          <div class="col-12">
            <label class="form-label small fw-semibold text-secondary">Description</label>
            <textarea
              rows="3"
              class="form-control form-control-sm"
              placeholder="Enter details..."
              [(ngModel)]="form.description"
              name="description"
              required
            ></textarea>
          </div>

          <div class="col-md-6">
            <label class="form-label small fw-semibold text-secondary">Image (optional)</label>
            <input type="file" class="form-control form-control-sm" (change)="onFileSelect($event)" />
          </div>

          <div class="col-12 text-end">
            <button
              class="btn btn-sm btn-outline-secondary me-2"
              type="button"
              (click)="resetForm()"
            >
              Reset
            </button>
            <button
              class="btn btn-sm btn-warning"
              [disabled]="!f.form.valid"
            >
              Post
            </button>
          </div>
        </div>
      </form>
    </div>

    <!-- Announcements List -->
    <h6 class="fw-bold text-secondary mb-3">
      <i class="bi bi-bell text-warning me-1"></i>Recent Announcements
    </h6>

    <div class="list-group list-group-flush">
      <div
        class="list-group-item bg-white rounded border-0 p-3 shadow-sm mb-3 d-flex align-items-start"
        *ngFor="let a of announcements"
      >
        <div class="bg-warning rounded-circle p-2 me-3">
          <i
            class="bi text-white"
            [ngClass]="{
              'bi-calendar-event': a.category === 'Event',
              'bi-flag': a.category === 'Holiday',
              'bi-clipboard2-data': a.category === 'Exam',
              'bi-info-circle': a.category === 'General'
            }"
          ></i>
        </div>
        <div>
          <h6 class="mb-1 text-dark fw-semibold">
            {{ a.title }}
            <span class="badge bg-warning text-dark ms-2">{{ a.category }}</span>
          </h6>
          <p class="mb-1 text-secondary small">{{ a.description }}</p>
          <small class="text-muted">Posted on {{ a.date | date: 'mediumDate' }}</small>
        </div>
      </div>
    </div>

    <div *ngIf="announcements.length === 0" class="text-center text-secondary py-5">
      <i class="bi bi-bell-slash text-warning display-6 d-block mb-2"></i>
      No announcements yet.
    </div>
  </div>
</div>
