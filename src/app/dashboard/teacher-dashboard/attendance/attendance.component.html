<div class="card bg-white h-100 shadow-sm">
  <div class="card-header bg-white border-bottom d-flex justify-content-between align-items-center">
    <h5 class="mb-0 text-dark fw-bold">
      <i class="bi bi-calendar-check-fill me-2 text-warning"></i>Manage Attendance
    </h5>
    <div class="d-flex align-items-center gap-2">
      <select
        class="form-select form-select-sm"
        style="width: 150px"
        [(ngModel)]="selectedClass"
      >
        <option value="">Select Class</option>
        <option *ngFor="let c of classes">{{ c }}</option>
      </select>
      <input
        type="date"
        class="form-control form-control-sm"
        [(ngModel)]="selectedDate"
      />
    </div>
  </div>

  <div class="card-body">
    <div *ngIf="selectedClass; else noClassSelected">
      <div class="table-responsive">
        <table class="table table-hover align-middle">
          <thead class="table-light">
            <tr>
              <th>#</th>
              <th>Student Name</th>
              <th>Roll No</th>
              <th class="text-center">Status</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let s of students; let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{ s.name }}</td>
              <td>{{ s.roll }}</td>
              <td class="text-center">
                <div class="form-check form-switch d-inline-block">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    [(ngModel)]="s.present"
                  />
                  <label
                    class="small ms-2"
                    [ngClass]="{
                      'text-success': s.present,
                      'text-danger': !s.present
                    }"
                  >
                    {{ s.present ? 'Present' : 'Absent' }}
                  </label>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="text-end mt-3">
        <button class="btn btn-sm btn-warning me-2" (click)="saveAttendance()">
          Save Attendance
        </button>
        <button class="btn btn-sm btn-outline-secondary" (click)="resetAttendance()">
          Reset
        </button>
      </div>
    </div>

    <ng-template #noClassSelected>
      <div class="text-center text-secondary py-5">
        <i class="bi bi-clipboard-check display-6 text-warning d-block mb-2"></i>
        Please select a class to mark attendance.
      </div>
    </ng-template>
  </div>
</div>
