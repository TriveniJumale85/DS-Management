<div class="container mt-4">

  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3 class="fw-bold">Manage Timetable</h3>

    <button class="btn btn-warning fw-semibold" (click)="openModal()">
      + Create Timetable
    </button>
  </div>

  <!-- Timetable Table -->
  <div class="card shadow-sm p-3">
    <table class="table table-bordered table-hover text-center">
      <thead class="table-warning">
        <tr>
          <th>#</th>
          <th>Day</th>
          <th>Subject</th>
          <th>Teacher</th>
          <th>Time</th>
          <th>Meeting Link</th>
          <th>Actions</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let t of timetable; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ t.dayOfWeek }}</td>
          <td>{{ t.subject }}</td>
          <td>{{ t.teacher }}</td>
          <td>{{ t.startTime }} - {{ t.endTime }}</td>
          <td>
            <a class="btn btn-sm btn-primary"
               *ngIf="t.meetingLink"
               target="_blank"
               [href]="t.meetingLink">
               Join
            </a>
          </td>
          <td>
            <button class="btn btn-danger btn-sm" (click)="deleteRow(i)">
              Delete
            </button>
            
             <button class="btn btn-sm btn-warning me-2" (click)="editRow(i)">
               Edit
             </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>


<!-- âœ… Modal Popup -->
<div class="modal fade show d-block" *ngIf="showModal" style="background: rgba(0,0,0,0.5);">
  <div class="modal-dialog">
    <div class="modal-content">

      <div class="modal-header bg-warning">
        <h5 class="modal-title fw-bold">Create Timetable</h5>
        <button class="btn-close" (click)="closeModal()"></button>
      </div>

      <div class="modal-body">
        <form [formGroup]="form">
          
          <label class="fw-semibold">Day</label>
          <select class="form-control mb-2" formControlName="dayOfWeek">
            <option *ngFor="let d of days" [value]="d">{{ d }}</option>
          </select>

          <label class="fw-semibold">Subject</label>
          <input class="form-control mb-2" formControlName="subject">

          <label class="fw-semibold">Teacher</label>
          <input class="form-control mb-2" formControlName="teacher">

          <label class="fw-semibold">Start Time</label>
          <input type="time" class="form-control mb-2" formControlName="startTime">

          <label class="fw-semibold">End Time</label>
          <input type="time" class="form-control mb-2" formControlName="endTime">

          <label class="fw-semibold">Meeting Link (optional)</label>
          <input class="form-control mb-2" formControlName="meetingLink">
          
        </form>
      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" (click)="closeModal()">Cancel</button>
        <button class="btn btn-warning fw-semibold" (click)="submit()">Save</button>
      </div>

    </div>
  </div>
</div>
